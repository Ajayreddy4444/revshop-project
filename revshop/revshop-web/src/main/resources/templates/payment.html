<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/base :: layout('Payment', ~{::section})}">

<section class="container payment-container mt-5">

<style>
.payment-container {
    max-width: 600px;
    margin: auto;
}

.payment-card {
    background: #ffffff;
    padding: 30px;
    border-radius: 16px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.08);
}

.payment-title {
    font-weight: 700;
    margin-bottom: 20px;
}

.order-summary {
    background: #f8f9fa;
    padding: 15px;
    border-radius: 10px;
    margin-bottom: 25px;
}

.amount {
    font-size: 20px;
    font-weight: 700;
    color: #28a745;
}

.method-box {
    margin-bottom: 15px;
}

.input-box {
    width: 100%;
    padding: 10px;
    border-radius: 8px;
    border: 1px solid #ced4da;
    margin-bottom: 10px;
}

.action-buttons {
    display: flex;
    gap: 12px;
    margin-top: 25px;
}

.pay-btn {
    flex: 1;
    padding: 12px;
    border-radius: 8px;
    border: none;
    background: linear-gradient(45deg, #0d6efd, #0b5ed7);
    color: white;
    font-weight: 600;
}

.pay-btn:hover {
    opacity: 0.9;
}

.cancel-btn {
    flex: 1;
    padding: 12px;
    border-radius: 8px;
    border: 2px solid #dc3545;
    background: white;
    color: #dc3545;
    font-weight: 600;
}

.cancel-btn:hover {
    background: #dc3545;
    color: white;
}
</style>

<div class="payment-card">

    <h3 class="payment-title text-center">Secure Payment</h3>

    <div class="order-summary">
        <p><strong>Order ID:</strong> <span th:text="${orderId}"></span></p>
        <p class="amount">
            Total: â‚¹ <span th:text="${amount}"></span>
        </p>
    </div>

    <form th:action="@{/payment/process}" method="post">

        <input type="hidden" name="orderId" th:value="${orderId}" />
        <input type="hidden" name="amount" th:value="${amount}" />

        <h6 class="mb-3">Select Payment Method</h6>

        <div class="method-box">
            <input type="radio" name="paymentMethod" value="CARD" required>
            ðŸ’³ Credit / Debit Card
        </div>

        <div class="method-box">
            <input type="radio" name="paymentMethod" value="UPI">
            ðŸ“± UPI
        </div>

        <!-- CARD SECTION -->
        <div id="cardSection" style="display:none; margin-top:15px;">
            <input type="text" name="cardNumber"
                   placeholder="Card Number"
                   class="input-box">

            <input type="text" name="cardHolder"
                   placeholder="Card Holder Name"
                   class="input-box">

            <input type="text" name="expiry"
                   placeholder="Expiry (MM/YY)"
                   class="input-box">

            <input type="password" name="cvv"
                   placeholder="CVV"
                   class="input-box">
        </div>

        <!-- UPI SECTION -->
        <div id="upiSection" style="display:none; margin-top:15px;">
            <input type="text" name="upiId"
                   placeholder="Enter UPI ID"
                   class="input-box">
        </div>

        <!-- Buttons side by side -->
        <div class="action-buttons">
            <button type="submit" class="pay-btn">
                Pay Now
            </button>
        </div>
    </form>

    <!-- Cancel Form -->
    <form th:action="@{/payment/cancel}" method="post" class="action-buttons">
        <input type="hidden" name="orderId" th:value="${orderId}" />
        <button type="submit" class="cancel-btn">
            Cancel
        </button>
    </form>

</div>
<script>
document.addEventListener("DOMContentLoaded", function () {

    const radios = document.querySelectorAll('input[name="paymentMethod"]');
    const cardSection = document.getElementById("cardSection");
    const upiSection = document.getElementById("upiSection");

    radios.forEach(radio => {
        radio.addEventListener("change", function () {

            if (this.value === "CARD") {
                cardSection.style.display = "block";
                upiSection.style.display = "none";
            } else {
                upiSection.style.display = "block";
                cardSection.style.display = "none";
            }
        });
    });
});
</script>

</section>



</html>