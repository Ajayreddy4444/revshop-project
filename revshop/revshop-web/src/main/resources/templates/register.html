<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/base :: layout('Register', ~{::section})}">

<section class="auth-wrapper">

    <div class="auth-card">

        <h2 class="mb-4 text-center">Create Account</h2>

        <!-- ðŸ”¥ Global Backend Error (Supports Multiple Messages) -->
        <div th:if="${error}" class="alert alert-danger text-center">
            <span th:utext="${error}"></span>
        </div>

        <!-- ðŸ”¥ Success Message -->
        <div th:if="${success}" class="alert alert-success text-center">
            <span th:text="${success}"></span>
        </div>

        <form method="post"
              th:action="@{/register}"
              th:object="${registerRequest}">

            <!-- Name -->
            <div class="mb-3">
                <input type="text"
                       th:field="*{name}"
                       class="form-control"
                       placeholder="Full Name">

                <div class="text-danger mt-1"
                     th:if="${#fields.hasErrors('name')}"
                     th:errors="*{name}">
                </div>
            </div>

            <!-- Email -->
            <div class="mb-3">
                <input type="email"
                       th:field="*{email}"
                       class="form-control"
                       placeholder="Email">

                <div class="text-danger mt-1"
                     th:if="${#fields.hasErrors('email')}"
                     th:errors="*{email}">
                </div>
            </div>

            <!-- Phone -->
            <div class="mb-3">
                <input type="text"
                       th:field="*{phone}"
                       class="form-control"
                       placeholder="Phone">

                <div class="text-danger mt-1"
                     th:if="${#fields.hasErrors('phone')}"
                     th:errors="*{phone}">
                </div>
            </div>

            <!-- Password -->
            <div class="mb-3">
                <input type="password"
                       th:field="*{password}"
                       class="form-control"
                       placeholder="Password">

                <div class="text-danger mt-1"
                     th:if="${#fields.hasErrors('password')}"
                     th:errors="*{password}">
                </div>
            </div>

            <!-- Role -->
            <div class="mb-3 text-center">
                <label class="fw-semibold mb-2 d-block">Register As</label>

                <div class="form-check form-check-inline">
                    <input class="form-check-input"
                           type="radio"
                           name="role"
                           value="BUYER"
                           required>
                    <label class="form-check-label">Buyer</label>
                </div>

                <div class="form-check form-check-inline">
                    <input class="form-check-input"
                           type="radio"
                           name="role"
                           value="SELLER"
                           required>
                    <label class="form-check-label">Seller</label>
                </div>
            </div>

            <button type="submit"
                    class="btn btn-warning w-100 fw-semibold">
                Register
            </button>

        </form>

        <div class="mt-4 text-center">
            <small>
                Already have an account?
                <a th:href="@{/login}" class="text-warning fw-semibold">
                    Login
                </a>
            </small>
        </div>

    </div>

</section>

</html>