<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/base :: layout('Checkout', ~{::section})}">

<section>

<h2>Checkout</h2>

<!-- ðŸ”¥ Cart Items -->
<table border="1">
    <tr>
        <th>Product Name</th>
        <th>Quantity</th>
    </tr>

    <tr th:each="item : ${cartItems}">
        <td th:text="${item.productName}"></td>
        <td th:text="${item.quantity}"></td>
    </tr>
</table>

<br/>

<form th:action="@{/orders/place}" method="post">

    <!-- Hidden User ID -->
    <input type="hidden" name="userId" th:value="${userId}" />

    <h3>Select Delivery Address</h3>

    <div th:if="${addresses == null or #lists.isEmpty(addresses)}">
        <p>No saved addresses found.</p>
        <a th:href="@{/address/add}">Add New Address</a>
    </div>

    <div th:each="addr : ${addresses}">
        <input type="radio"
               name="addressId"
               th:value="${addr.addressId}"
               required />

        <strong th:text="${addr.fullName}"></strong>,
        <span th:text="${addr.addressLine}"></span>,
        <span th:text="${addr.city}"></span>,
        <span th:text="${addr.state}"></span>,
        <span th:text="${addr.pincode}"></span>

        <br/><br/>
    </div>

    <button type="submit">Place Order</button>

</form>