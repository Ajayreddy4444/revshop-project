<div th:fragment="header">

<nav class="navbar navbar-expand-lg navbar-dark bg-black px-4 py-3">

    <!-- Brand -->
    <a class="navbar-brand fw-bold fs-4 text-warning" th:href="@{/}">
        Rev<span class="text-white">Shop</span>
    </a>

    <button class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarNav">

		<!-- LEFT SIDE -->
		<ul class="navbar-nav me-auto align-items-center">

		    <!-- Show ONLY for BUYER -->
		    <li class="nav-item"
		        th:if="${session.user != null and session.user.role == 'BUYER'}">
		        <a class="nav-link text-white"
		           th:href="@{/}">
		            <i class="bi bi-bag me-1"></i>
		            Products
		        </a>
		    </li>

		    <!-- Search ONLY for BUYER -->
		    <li class="nav-item ms-3"
		        th:if="${session.user != null and session.user.role == 'BUYER'}">

		        <form class="d-flex" th:action="@{/search}" method="get">
		            <input class="form-control form-control-sm me-2"
		                   type="search"
		                   name="keyword"
		                   placeholder="Search products..."
		                   style="width:200px;">

		            <button class="btn btn-warning btn-sm">
		                <i class="bi bi-search"></i>
		            </button>
		        </form>

		    </li>

		</ul>
		

		<!-- RIGHT SIDE -->
		<ul class="navbar-nav align-items-center gap-3">

		    <!-- NOT LOGGED IN -->
		    <li class="nav-item" th:if="${session.user == null}">
		        <a th:href="@{/login}"
		           th:class="${activePage == 'login'} 
		           ? 'btn btn-warning' 
		           : 'btn btn-outline-light'">
		            <i class="bi bi-box-arrow-in-right me-1"></i>
		            Login
		        </a>
		    </li>

		    <li class="nav-item" th:if="${session.user == null}">
		        <a th:href="@{/register}"
		           th:class="${activePage == 'register'} 
		           ? 'btn btn-warning' 
		           : 'btn btn-outline-light'">
		            <i class="bi bi-person-plus me-1"></i>
		            Register
		        </a>
		    </li>
			<!-- â­ FAVOURITES FEATURE START -->
			<li class="nav-item"
			    th:if="${session.user != null and session.user.role == 'BUYER'}">
			    <a class="nav-link text-white"
			       th:href="@{/favourites}">
			        <i class="bi bi-heart me-1"></i>
			        Favourites
			    </a>
			</li>
			<!-- â­ FAVOURITES FEATURE END -->

		    <!-- ðŸ”” BELL (Place BEFORE dropdown) -->
		    <li class="nav-item" th:if="${session.user != null}">
		        <a class="nav-link text-white position-relative" href="#">
		            <i class="bi bi-bell fs-5"></i>

		            <span class="position-absolute badge rounded-pill bg-danger"
		                  style="top: 2px; right: -5px; font-size: 10px;">
		                3
		            </span>
		        </a>
		    </li>

		    <!-- USER DROPDOWN -->
		    <li class="nav-item dropdown" th:if="${session.user != null}">

		        <a class="nav-link dropdown-toggle text-white"
		           href="#"
		           role="button"
		           data-bs-toggle="dropdown">
		            <i class="bi bi-person-circle me-1"></i>
		            <span th:text="${session.user.name}"></span>
		        </a>

		        <ul class="dropdown-menu dropdown-menu-end">
		            <li>
		                <a class="dropdown-item" th:href="@{/home}">
		                    <i class="bi bi-speedometer2 me-2"></i>
		                    Dashboard
		                </a>
		            </li>

		            <li><hr class="dropdown-divider"></li>

		            <li>
		                <a class="dropdown-item text-danger" th:href="@{/logout}">
		                    <i class="bi bi-box-arrow-right me-2"></i>
		                    Logout
		                </a>
		            </li>
		        </ul>

		    </li>

		</ul>


    </div>

</nav>

</div>